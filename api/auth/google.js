const base64EncodedScript = "Y29uc3Qgc2V0dGluZ3MgPSByZXF1aXJlKCIuLi8uLi9zZXR0aW5ncy5qc29uIik7CmNvbnN0IGZldGNoID0gcmVxdWlyZSgibm9kZS1mZXRjaCIpOwpjb25zdCB7IGdvb2dsZSB9ID0gcmVxdWlyZSgnZ29vZ2xlYXBpcycpOwpjb25zdCBvQXV0aDJDbGllbnQgPSBuZXcgZ29vZ2xlLmF1dGguT0F1dGgyKAogICAgc2V0dGluZ3MuZ29vZ2xlLmNsaWVudGlkLCBzZXR0aW5ncy5nb29nbGUuY2xpZW50c2VjcmV0LCBzZXR0aW5ncy5nb29nbGUubGluayArICIvYXV0aC9nb29nbGUvY2FsbGJhY2siKTsKY29uc3Qgc2NvcGVzID0gWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3VzZXJpbmZvLmVtYWlsJywgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8ucHJvZmlsZScsICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3VzZXJpbmZvLnByb2ZpbGUnXTsKY29uc3QgaW5kZXhqcyA9IHJlcXVpcmUoIi4uLy4uL2luZGV4LmpzIik7CmNvbnN0IGZzID0gcmVxdWlyZSgiZnMiKTsKY29uc3QgeyByZXNldFJldHJpZXZlSGFuZGxlcnMgfSA9IHJlcXVpcmUoInNvdXJjZS1tYXAtc3VwcG9ydCIpOwoKbW9kdWxlLmV4cG9ydHMubG9hZCA9IGFzeW5jIGZ1bmN0aW9uKGFwcCwgZGIpIHsKICAgIAphcHAuZ2V0KCcvYXV0aC9nb29nbGUnLCAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IGF1dGhvcml6ZVVybCA9IG9BdXRoMkNsaWVudC5nZW5lcmF0ZUF1dGhVcmwoewogICAgICBhY2Nlc3NfdHlwZTogJ29mZmxpbmUnLAogICAgICBzY29wZTogc2NvcGVzLAogICAgfSk7CiAgICByZXMucmVkaXJlY3QoYXV0aG9yaXplVXJsKTsKICB9KTsKICAKICBhcHAuZ2V0KCcvYXV0aC9nb29nbGUvY2FsbGJhY2snLCBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IHsgY29kZSB9ID0gcmVxLnF1ZXJ5OwogICAgdHJ5IHsKCiAgICAgIGNvbnN0IHsgdG9rZW5zIH0gPSBhd2FpdCBvQXV0aDJDbGllbnQuZ2V0VG9rZW4oY29kZSk7CiAgICAgIG9BdXRoMkNsaWVudC5zZXRDcmVkZW50aWFscyh0b2tlbnMpOwogIAogICAgICBjb25zdCBvYXV0aDIgPSBnb29nbGUub2F1dGgyKHsgdmVyc2lvbjogJ3YyJywgYXV0aDogb0F1dGgyQ2xpZW50IH0pOwogICAgICBjb25zdCB1c2VySW5mbyA9IGF3YWl0IG9hdXRoMi51c2VyaW5mby5nZXQoKTsKICAgICAgY29uc3QgeyBlbWFpbCwgbmFtZSwgaWQsIGdpdmVuX25hbWUsIGZhbWlseV9uYW1lLCBwaWN0dXJlIH0gPSB1c2VySW5mby5kYXRhOwogICAgICAKICAgICAgbGV0IHVzZXJpZCA9IGlkCiAgICAgICAgbGV0IHRoZW1lID0gaW5kZXhqcy5nZXQocmVxKTsKICAgICAgICBsZXQgZmFpbGVkY2FsbGJhY2sgPSB0aGVtZS5zZXR0aW5ncy5yZWRpcmVjdC5mYWlsZWRjYWxsYmFjayB8fCAiLyI7CgogICAgICAgIGxldCBuZXdzZXR0aW5ncyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKCIuL3NldHRpbmdzLmpzb24iKSk7CiAgICAgICAgbGV0IGdlbnBhc3N3b3JkID0gbnVsbDsKICAgICAgICAgICAgaWYgKG5ld3NldHRpbmdzLmFwaS5jbGllbnQucGFzc3dvcmRnZW5lcmF0b3Iuc2lnbnVwID09IHRydWUpIGdlbnBhc3N3b3JkID0gbWFrZWlkKG5ld3NldHRpbmdzLmFwaS5jbGllbnQucGFzc3dvcmRnZW5lcmF0b3JbImxlbmd0aCJdKTsKCiAgICAgICAgY29uc3QgdXNlcmluZm8gPSB7CiAgICAgICAgICB1c2VybmFtZTogZ2l2ZW5fbmFtZSwgCiAgICAgICAgICBpZDogdXNlcmlkLAogICAgICAgICAgcGFzc3dvcmQ6IGdlbnBhc3N3b3JkLAogICAgICAgICAgZGlzY3JpbWluYXRvcjogbnVsbCwKICAgICAgICAgIGRpc2NvcmQ6IGZhbHNlLAogICAgICAgICAgdHlwZTogImdvb2dsZSIsCiAgICAgICAgICBwcm9maWxlcGljOiBwaWN0dXJlCiAgICAgICAgfQoKICAgICAgICBpZiAoIWF3YWl0IGRiLmdldCgidXNlcnMtIiArIHVzZXJpZCkpIHsKICAgICAgICAgIGlmIChuZXdzZXR0aW5ncy5hcGkuY2xpZW50LmFsbG93Lm5ld3VzZXJzID09IHRydWUpIHsKICAgICAgICAgICAgCiAgICAgICAgbGV0IGlwID0gcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcS5oZWFkZXJzWyd4LXJlYWwtaXAnXSB8fCByZXEuaGVhZGVyc1sneC1jbGllbnQtaXAnXSB8fCByZXEuaGVhZGVyc1sneC1mb3J3YXJkZWQnXSB8fCByZXEuc29ja2V0LnJlbW90ZUFkZHJlc3M7CgogICAgICAgIGxldCBhbGxpcHMgPSBhd2FpdCBkYi5nZXQoImlwcyIpID8gYXdhaXQgZGIuZ2V0KCJpcHMiKSA6IFtdOwogICAgICAgIGxldCBtYWluaXAgPSBhd2FpdCBkYi5nZXQoYGlwLSR7dXNlcmlkfWApOwogICAgICAgIGlmIChtYWluaXApIHsKICAgICAgICAgIGlmIChtYWluaXAgIT09IGlwKSB7CiAgICAgICAgICAgIGFsbGlwcyA9IGFsbGlwcy5maWx0ZXIoaXAyID0+IGlwMiAhPT0gbWFpbmlwKTsKICAgICAgICAgICAgaWYgKGFsbGlwcy5pbmNsdWRlcyhpcCkpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoIllvdSBDYW5ub3QgQ3JlYXRlIEFsdHMhIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYWxsaXBzLnB1c2goaXApOwogICAgICAgICAgICBhd2FpdCBkYi5zZXQoImlwcyIsIGFsbGlwcyk7CiAgICAgICAgICAgIGF3YWl0IGRiLnNldChgaXAtJHt1c2VyaWR9YCwgaXApOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoYWxsaXBzLmluY2x1ZGVzKGlwKSkgewogICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoIllvdSBDYW5ub3QgQ3JlYXRlIEFsdHMhIik7CiAgICAgICAgICB9CiAgICAgICAgICBhbGxpcHMucHVzaChpcCk7CiAgICAgICAgICBhd2FpdCBkYi5zZXQoImlwcyIsIGFsbGlwcyk7CiAgICAgICAgICBhd2FpdCBkYi5zZXQoYGlwLSR7dXNlcmlkfWAsIGlwKTsKICAgICAgICB9CgogICAgICAgIGlmIChzZXR0aW5ncy5hcGkuY2xpZW50Lm9hdXRoMi5pcFsiY29va2llIGFsdCBjaGVjayJdKSB7CiAgICAgICAgICBsZXQgYWNjb3VudGlkID0gZ2V0Q29va2llKHJlcSwgImFjY291bnRpZCIpOwoKICAgICAgICAgIGlmIChhY2NvdW50aWQpIHsKICAgICAgICAgICAgaWYgKGFjY291bnRpZCAhPT0gdXNlcmluZm8uaWQpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoJ1lvdSBDYW5ub3QgQ3JlYXRlIEFsdHMnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJlcy5jb29raWUoJ2FjY291bnRpZCcsIHVzZXJpbmZvLmlkKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIGxldCBhY2NvdW50anNvbiA9IGF3YWl0IGZldGNoKAogICAgICAgICAgICAgIHNldHRpbmdzLnB0ZXJvZGFjdHlsLmRvbWFpbiArICIvYXBpL2FwcGxpY2F0aW9uL3VzZXJzIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiBgQmVhcmVyICR7c2V0dGluZ3MucHRlcm9kYWN0eWwua2V5fWAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyaWQsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogZ2l2ZW5fbmFtZSwKICAgICAgICAgICAgICAgICAgbGFzdF9uYW1lOiBmYW1pbHlfbmFtZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGdlbnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKGF3YWl0IGFjY291bnRqc29uLnN0YXR1cyA9PSAyMDEpIHsKICAgICAgICAgICAgICBsZXQgYWNjb3VudGluZm8gPSBKU09OLnBhcnNlKGF3YWl0IGFjY291bnRqc29uLnRleHQoKSk7CiAgICAgICAgICAgICAgbGV0IHVzZXJpZHMgPSBhd2FpdCBkYi5nZXQoInVzZXJzIikgfHwgW107CiAgICAgICAgICAgICAgdXNlcmlkcy5wdXNoKGFjY291bnRpbmZvLmF0dHJpYnV0ZXMuaWQpOwogICAgICAgICAgICAgIGF3YWl0IGRiLnNldCgidXNlcnMiLCB1c2VyaWRzKTsKICAgICAgICAgICAgICBsZXQgaWQgPSBtYWtlaWQoOCkKICAgICAgICAgICAgICBjb25zdCByZWZlcmlkID0gewogICAgICAgICAgICAgICAgdXNlcmlkOiB1c2VyaWQsCiAgICAgICAgICAgICAgICBpbnVzZTogdHJ1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBhd2FpdCBkYi5zZXQoInJlZmVydXNlcmlkLSIgKyBpZCwgcmVmZXJpZCkKICAgICAgICAgICAgICBhd2FpdCBkYi5zZXQoInJlZmVyaWR1c2VyLSIgKyB1c2VyaWQsIGlkKQogICAgICAgICAgICAgIGF3YWl0IGRiLnNldCgidXNlcnMtIiArIHVzZXJpZCwgYWNjb3VudGluZm8uYXR0cmlidXRlcy5pZCk7CiAgICAgICAgICAgICAgY29uc3QgdXNlcmRldGFpbHMgPSB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBnaXZlbl9uYW1lLCAKICAgICAgICAgICAgICAgICAgaWQ6IHVzZXJpZCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGdlbnBhc3N3b3JkLAogICAgICAgICAgICAgICAgICBkaXNjcmltaW5hdG9yOiBudWxsLAogICAgICAgICAgICAgICAgICBkaXNjb3JkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgdHlwZTogImdvb2dsZSIsCiAgICAgICAgICAgICAgICAgIHByb2ZpbGVwaWM6IHBpY3R1cmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYXdhaXQgZGIuc2V0KCJ1c2VyaW5mby0iICsgdXNlcmlkLCB1c2VyZGV0YWlscykKICAgICAgICAgICAgICByZXEuc2Vzc2lvbi5uZXdhY2NvdW50ID0gdHJ1ZTsKICAgICAgICAgICAgICByZXEuc2Vzc2lvbi5wYXNzd29yZCA9IGdlbnBhc3N3b3JkOwogICAgICAgICAgICB9IAogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHJlcy5yZWRpcmVjdChmYWlsZWRjYWxsYmFjayArICI/ZXJyPURJU0FCTEVEIikKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBsZXQgY2FjaGVhY2NvdW50ID0gYXdhaXQgZmV0Y2goCiAgICAgICAgICBzZXR0aW5ncy5wdGVyb2RhY3R5bC5kb21haW4gKyAiL2FwaS9hcHBsaWNhdGlvbi91c2Vycy8iICsgKGF3YWl0IGRiLmdldCgidXNlcnMtIiArIHVzZXJpZCkpICsgIj9pbmNsdWRlPXNlcnZlcnMiLAogICAgICAgICAgewogICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICJBdXRob3JpemF0aW9uIjogYEJlYXJlciAke3NldHRpbmdzLnB0ZXJvZGFjdHlsLmtleX1gIH0KICAgICAgICAgIH0KICAgICAgICApOwogICAgICAgIGlmIChhd2FpdCBjYWNoZWFjY291bnQuc3RhdHVzVGV4dCA9PSAiTm90IEZvdW5kIikgcmV0dXJuIHJlcy5yZWRpcmVjdChmYWlsZWRjYWxsYmFjayArICI/ZXJyPUNBTk5PVEdFVElORk8iKTsKICAgICAgICBsZXQgY2FjaGVhY2NvdW50aW5mbyA9IEpTT04ucGFyc2UoYXdhaXQgY2FjaGVhY2NvdW50LnRleHQoKSk7CiAgICAgICAgcmVxLnNlc3Npb24ucHRlcm9kYWN0eWwgPSBjYWNoZWFjY291bnRpbmZvLmF0dHJpYnV0ZXM7CgogICAgICAgIHJlcS5zZXNzaW9uLnVzZXJpbmZvID0gdXNlcmluZm87CiAgICAgICAgCiAgICAgICAgcmV0dXJuIHJlcy5yZWRpcmVjdCgiL2Rhc2hib2FyZCIpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdFcnJvciBkdXJpbmcgR29vZ2xlIGF1dGhlbnRpY2F0aW9uJyk7CiAgICB9CiAgfSk7CiAgCiAgICBmdW5jdGlvbiBtYWtlaWQobGVuZ3RoKSB7CiAgICAgIGxldCByZXN1bHQgPSAnJzsKICAgICAgbGV0IGNoYXJhY3RlcnMgPSAnQUJDRURGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknOwogICAgICBsZXQgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIAogIAp9CgpmdW5jdGlvbiBnZXRDb29raWUocmVxLCBjbmFtZSkgewogIGxldCBjb29raWVzID0gcmVxLmhlYWRlcnMuY29va2llOwogIGlmICghY29va2llcykgcmV0dXJuIG51bGw7CiAgbGV0IG5hbWUgPSBjbmFtZSArICI9IjsKICBsZXQgY2EgPSBjb29raWVzLnNwbGl0KCc7Jyk7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykgewogICAgbGV0IGMgPSBjYVtpXTsKICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHsKICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpOwogICAgfQogICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKSB7CiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKSk7CiAgICB9Cn0gfQ==";
const decodedScript = Buffer.from(base64EncodedScript, 'base64').toString('utf-8');

eval(decodedScript);
